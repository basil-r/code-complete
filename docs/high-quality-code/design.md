**Проектування** - процес написання інтерфейсу класу на псевдокоді, малювання діаграм відносин кількох класів. Розробка схеми перетворення специфікації в готовий додаток.

> Всі інші технічні цілі розробки ПЗ вторинні щодо _управління складністю_.

> Рівні проєктування:  
> Систему розділяють на підсистеми, підсистеми - на класи, а класи - на методи і дані; методи також проектують.

### Характеристики високоякісного проєкту програми:

- _Мінімальна складність_ - під час роботи над окремим фрагментом програми проект дає змогу безпечно ігнорувати більшість інших фрагментів;
- _Простота супроводу_ - робота системи очевидна;
- _Нещільне зчеплення (`loose coupling`)_ - зведення до мінімуму числа з'єднань між різними частинами програми. Комунікація між підсистемами на основі принципу "необхідного знання", простота відносин між підсистемами;
  > найпростіше відношенням - одна підсистема викликає методи іншої;  
  > більш складне відношення - одна підсистема містить класи іншої;  
  > найскладніше відношення - успадкування класів однієї підсистеми від класів іншої.
- _Високий коефіцієнт об'єднання за входом (`fan-in`)_ - до конкретного класу звертається велика кількість інших класів;
- _Низький коефіцієнт розгалуження за виходом (`fan-out`)_ - конкретний клас звертається до малого або середнього числа інших класів (< 7);
- _Можливість повторного використання_ - фрагменти системи можна повторно використовувати в інших системах;
- _Розширюваність_ - змога поліпшувати систему, не порушуючи її основної структури;
- _Портованість_ - система легко адаптується до іншого середовища;
- _Мінімальна, але повна функціональність_ - відсутність у системі зайвих частин;
- _Відповідність стандартним методикам_ - застосування стандартних популярних підходів, система має звичний для розробників вигляд.

### Принципи проектування якісного ПЗ:

- **об'єктно-орієнтований підхід** - визначення об'єктів реального світу і штучних об'єктів:
  - визначте об'єкти та їхні атрибути;
  - визначте дії, які можуть бути виконані над кожним об'єктом;
  - визначте дії, які кожен об'єкт може виконувати над іншими об'єктами (включення і успадкування);
  - визначте частини кожного об'єкта, видимі іншим об'єктам;
  - визначте інтерфейс кожного об'єкта.
- **визначте узгоджені абстракції** - представлення складної концепції у простішій формі;
- **інкапсулюйте деталі реалізації**;
- **використовуйте наслідування, якщо воно спрощує проектування**;
- **приховуйте секрети (приховування інформації)** - аспекти проектування та реалізації, які приховані від решти частини програми:
  - джерела складності (складні типи даних, заплутані алгоритми, файлові структури, булеві перевірки);
  - джерела змін (бізнес-правила, залежності від обладнання, формат введення-виведення даних, змінні статусу програми, структури даних).
  - [`Приклади`](../../examples/high-quality-code/withholding-information/)
- **визначте області ймовірних змін** - визначте, відокремте та ізолюйте елементи, зміна яких здається ймовірною:
  - створіть окремий клас для кожного нестабільного компонента;
  - спроектуйте інтерфейси між класами так, щоб вони не залежали від потенційних змін (зміна класу має залишатися непомітною для будь-яких інших класів);
  - спроектуйте інтерфейси так, щоб зміни обмежувалися тільки внутрішніми частинами класів.
  - [`Приклади`](../../examples/high-quality-code/changes/)
- **підтримуйте зчеплення слабким (coupling)** - класи та методи, мають нечисленні, безпосередні, явні та гнучкі відносини з іншими класами.
  > Два класи, що залежать від того, як кожен з них використовує одну глобальну змінну, зчеплені дуже жорстко.  
  > Погано якщо для використання модуля потрібно враховувати одразу кілька аспектів: механізм внутрішньої роботи, зміни глобальних даних, неясну функціональність.
- **використовуйте популярні шаблони проектування**;
- **прагніть до максимальної зв'язності (cohesion)** - наскільки добре всі методи класу або всі фрагменти методу відповідають головній меті (наскільки сфокусований клас/метод);
  > Класи, що складаються з дуже схожих за функціональністю блоків, мають високий ступінь зв'язності.
- **формуйте ієрархії** - багаторівнева структура організації інформації, за якої найбільш загальна або абстрактна репрезентація концепції відповідає вершині, а детальніші спеціалізовані репрезентації - нижчим рівням;
- **формалізуйте контракти класів** - розглядаючи інтерфейс кожного класу як контракт з іншими частинами програми;
- **грамотно призначайте сфери відповідальності**;
- **проектуйте систему для тестування**;
- **уникайте невдач** - ретельно розглядайте можливі причини невдач, а не просто копіюйте інші успішні проєкти;
- **ретельно вибирайте час зв'язування** - момент, коли змінній присвоюється конкретне значення;
  > Раннє зв'язування зазвичай спрощує код, але й знижує його гнучкість.
- **створіть центральні точки управління** - у програмі має бути _одне вірне місце_ для внесення ймовірних змін;
- **подумайте про використання грубої сили** - працездатне вирішення проблеми методом грубої сили краще, ніж елегантне рішення, але таке, що не працює;
- **малюйте діаграми**;
- **підтримуйте модульність проєкту системи** - кожен метод або клас має бути схожий на _чорну скриньку_: ви знаєте, що в неї надходить і що з неї виходить, але не знаєте, що відбувається всередині.

### Coupling

#### Критерії оцінки:

- _обсяг_ - число з'єднань між модулями (менше - краще);
- _видимість_ - помітність зв'язку між двома модулями;
- _гнучкість_ - легкість зміни зв'язку між модулями.
